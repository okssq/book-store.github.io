"use strict";(globalThis["webpackChunksmart_device_cloud"]=globalThis["webpackChunksmart_device_cloud"]||[]).push([[769],{1769:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var o=n(9835),a=n(499),s=n(3746);const l=(0,s.Q_)("map",(()=>{const e=(0,a.XI)(null),t=(0,a.iH)(0),n=()=>(console.log("Tencent Map load success."),new Promise(((n,o)=>{try{e.value=new TMap.Map(document.getElementById("global-map"),{center:new TMap.LatLng(39.98412,116.307484),zoom:17.2,pitch:43.5,rotation:45}),e.value.removeControl(TMap.constants.DEFAULT_CONTROL_ID.SCALE);const o=e.value.getControl(TMap.constants.DEFAULT_CONTROL_ID.ROTATION),a=e.value.getControl(TMap.constants.DEFAULT_CONTROL_ID.ZOOM);a.setNumVisible(!0),a.setPosition(TMap.constants.CONTROL_POSITION.BOTTOM_LEFT),a.setClassName("custom-tmap-zoomcontrol"),o.setPosition(TMap.constants.CONTROL_POSITION.TOP_LEFT),t.value=1,console.log("Tencent Map render success."),n(!0)}catch(a){o(a)}}))),o=()=>new Promise((function(e,t){const n=document.getElementById("scriptTMap");if(n)return e(),null;const o=document.createElement("script");o.id="scriptTMap",o.src="https://map.qq.com/api/gljs?v=1.exp&key=KA3BZ-DGGEJ-SCTFA-FLG7D-A7GDT-PEB54&libraries=geometry,service,tools",o.type="text/javascript",o.onerror=t,o.async=!0,o.onload=e,document.head.appendChild(o)})),s=()=>new Promise(((a,s)=>{if(1===t.value)return console.log("Tencent Map render success.(Has been rendered , not repeat render)"),a(!0),null;t.value=0,o().then((()=>n())).then((()=>a())).catch((n=>{const o=document.getElementById("scriptTMap");o&&o.remove(),e.value=null,t.value=-1,s(n)}))}));return{map:e,mapStatus:t,loaderMap:s}})),c=l,r={id:"component-map",class:"relative-position fit"},i={key:0,class:"absolute-center"},p={__name:"index",emits:["load"],setup(e,{emit:t}){const n=c(),{mapStatus:l}=(0,s.Jk)(n),p=()=>{const e=document.getElementById("global-map"),t=document.getElementById("component-map");t.insertBefore(e,null)},m=()=>{const e=document.getElementById("global-map"),t=document.getElementById("global-map-wrap");t.insertBefore(e,null)};(0,o.YP)(l,(()=>{1===l.value&&t("load")}),{immediate:!0});const u=()=>{n.loaderMap().then((()=>{p()}))};return(0,o.bv)((()=>{u()})),(0,o.Jd)((()=>{m()})),(e,t)=>{const n=(0,o.up)("q-btn"),s=(0,o.up)("q-spinner-gears"),c=(0,o.up)("q-inner-loading");return(0,o.wg)(),(0,o.iD)("div",r,[-1===(0,a.SU)(l)?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(n,{color:"primary",icon:"sync",onClick:u},{default:(0,o.w5)((()=>[(0,o.Uk)(" 地图资源加载失败，请重试！ ")])),_:1})])):(0,o.kq)("",!0),(0,o.Wm)(c,{showing:0===(0,a.SU)(l)},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{size:"50px",color:"primary"})])),_:1},8,["showing"])])}}};var m=n(8879),u=n(854),d=n(9120),T=n(9984),g=n.n(T);const v=p,O=v;g()(p,"components",{QBtn:m.Z,QInnerLoading:u.Z,QSpinnerGears:d.Z});const _={class:"fit relative-position"},M={__name:"index",setup(e){const t=()=>{};return(e,n)=>((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)((0,a.SU)(O),{onLoad:t})]))}},I=M,h=I}}]);